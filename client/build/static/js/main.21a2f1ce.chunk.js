(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{42:function(e,t,a){},43:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(16),r=a.n(c),s=(a(42),a(43),a(13)),o=a.n(s),l=a(18),i=Object(n.createContext)(),u=Object(n.createContext)(),j=a(0),d=function(e){var t=e.title,a=e.icon,c=Object(n.useContext)(i),r=c.user,s=c.isAuthenticated,o=c.logout,d=Object(n.useContext)(u).clearContacts,p=Object(j.jsxs)(n.Fragment,{children:[Object(j.jsxs)("li",{className:"lg:mx-6 sm:mx-0",children:["Hello ",r&&r.name.split(" ")[0]]}),Object(j.jsx)("li",{children:Object(j.jsxs)("a",{href:"#!",onClick:function(){o(),d()},children:[Object(j.jsx)("i",{className:"fas fa-sign-out-alt text-gray-500 hover:text-gray-900"})," ",Object(j.jsx)("span",{className:"hide-sm text-gray-500 hover:text-gray-900",children:"Logout"})]})})]}),b=Object(j.jsxs)(n.Fragment,{children:[Object(j.jsx)("li",{className:"text-gray-500 hover:text-gray-900",children:Object(j.jsx)(l.b,{to:"/register",children:Object(j.jsx)("span",{className:"text-gray-500 hover:text-gray-900",children:"Register"})})}),Object(j.jsx)("li",{children:Object(j.jsx)(l.b,{to:"/login",children:Object(j.jsx)("span",{className:"text-gray-500 hover:text-gray-900",children:"Login"})})})]});return Object(j.jsxs)("div",{className:"navbar bg-gray-200 lg:h-16 sm:h-20 shadow-sm",children:[Object(j.jsxs)("h1",{className:"text-xl",children:[Object(j.jsx)("i",{className:a})," ",t]}),Object(j.jsx)("ul",{className:"sm:my-1 lg:my-0",children:s?p:b})]})};d.prototypes={title:o.a.object.isRequired,icon:o.a.string},d.defaultProps={title:"Phonebook",icon:"fas fa-address-book"};var p=d,b=a(3),m=function(){var e=Object(n.useContext)(u),t=e.filterContacts,a=e.clearFilter,c=e.filtered,r=Object(n.useRef)("");Object(n.useEffect)((function(){null===c&&(r.current.value="")}),[]);return Object(j.jsx)("div",{children:Object(j.jsx)("input",{ref:r,type:"text",placeholder:"Filter Contacts...",onChange:function(e){""!==r.current.value?(t(e.target.value),console.log(r.current.value)):a()}})})},O=a(15),h=a(2),x=a(10),f=function(){var e=Object(n.useContext)(u),t=e.addContact,a=e.current,c=e.clearCurrent,r=e.updateContact;Object(n.useEffect)((function(){i(null!==a?a:{name:"",email:"",phone:"",type:"personal"})}),[e,a]);var s=Object(n.useState)({name:"",email:"",phone:"",type:"personal"}),o=Object(x.a)(s,2),l=o[0],i=o[1],d=l.name,p=l.email,b=l.phone,m=l.type,f=function(e){i(Object(h.a)(Object(h.a)({},l),{},Object(O.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a?(r(l),c()):t(l),i({name:"",email:"",phone:"",type:"personal"})},className:"shadow-md p-8  hover:shadow-lg",children:[Object(j.jsx)("h2",{className:"text-gray-500 text-lg font-semibold",children:a?"Edit Contact":"Add Contact"}),Object(j.jsx)("input",{type:"text",placeholder:"Name",name:"name",value:d,onChange:f}),Object(j.jsx)("input",{type:"email",placeholder:"Email",name:"email",value:p,onChange:f}),Object(j.jsx)("input",{type:"text",placeholder:"Phone",name:"phone",value:b,onChange:f}),Object(j.jsx)("h5",{className:"font-bold text-gray-500",children:"Contact Type"}),Object(j.jsx)("input",{type:"radio",name:"type",value:"personal",defaultChecked:"personal"===m})," Personal "," ",Object(j.jsx)("input",{type:"radio",name:"type",onChange:f,value:"professional",checked:"professional"===m})," Professional",Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"submit",value:a?"Update Contact":"Add Contact",className:"btn btn-primary btn-block"})}),a&&Object(j.jsx)("div",{children:Object(j.jsx)("button",{className:"btn btn-block btn-secondary",onClick:function(){c()},children:"Clear"})})]})},g=function(e){var t=e.contact,a=t._id,c=t.name,r=t.type,s=t.email,o=t.phone,l=Object(n.useContext)(u),i=l.deleteContact,d=l.setCurrent,p=l.clearCurrent;return Object(j.jsxs)("div",{className:"card bg-gray-100 border-0 shadow-sm hover:shadow-md",children:[Object(j.jsxs)("h3",{className:"text-gray-600 font-bold text-left",children:[c,""," ",Object(j.jsx)("span",{style:{float:"right"},className:"font-normal badge "+("professional"===r?"badge-success":"badge-primary"),children:r.charAt(0).toUpperCase()+r.slice(1)})]}),Object(j.jsxs)("ul",{className:"list",children:[s&&Object(j.jsxs)("li",{children:[Object(j.jsx)("i",{className:"fas fa-envelope-open mx-1"}),s]}),o&&Object(j.jsxs)("li",{children:[Object(j.jsx)("i",{className:"fas fa-phone mx-1"}),o]})]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("button",{className:"btn btn-dark btn-sm",onClick:function(){return d(t)},children:"Edit"}),Object(j.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){i(a),p()},children:"Delete"})]})]})},y=a(76),v=a(74),C=function(){return Object(j.jsx)(n.Fragment,{children:Object(j.jsx)("img",{src:"../../../spinner.svg",style:{width:"200px",margin:"auto",display:"block"},alt:"Loading..."})})},N=function(){var e=Object(n.useContext)(u),t=e.contacts,a=e.filtered,c=e.getContacts,r=e.loading;e.deleteContact;return Object(n.useEffect)((function(){c()}),[]),null===t||0!==t.length||r?Object(j.jsx)(n.Fragment,{children:null===t||r?Object(j.jsx)(C,{}):Object(j.jsx)(y.a,{className:"",children:null!==a?a.map((function(e){return Object(j.jsx)(v.a,{timeout:500,classNames:"item",children:Object(j.jsx)(g,{contact:e})},e._id)})):t.map((function(e){return Object(j.jsx)(v.a,{timeout:500,classNames:"item",children:Object(j.jsx)(g,{contact:e})},e._id)}))})}):Object(j.jsx)("h4",{children:"Please add a contact"})},w=function(){var e=Object(n.useContext)(i);Object(n.useContext)(u);return Object(n.useEffect)((function(){e.loadUser()}),[]),Object(j.jsxs)("div",{className:"grid-2",children:[Object(j.jsx)("div",{children:Object(j.jsx)(f,{})}),Object(j.jsxs)("div",{children:[Object(j.jsx)(m,{}),Object(j.jsx)(N,{})]})]})},k=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"About This App"}),Object(j.jsx)("p",{className:"my-1",children:"This is a full stack React app for keeping contacts."}),Object(j.jsxs)("p",{className:"bg-dark p",children:[Object(j.jsx)("strong",{children:"Version:"})," 1.0.0"]})]})},E=a(6),A=a.n(E),R=a(14),T=a(21),_="ADD_CONTACT",S="DELETE_CONTACT",L="SET_CURRENT",F="CLEAR_CURRENT",P="UPDATE_CONTACT",I="FILTER_CONTACTS",U="CLEAR_FILTER",D="SET_ALERT",G="REMOVE_ALERT",H="REGISTER_SUCCESS",J="REGISTER_FAIL",V="USER_LOADED",q="AUTH_ERROR",B="LOGIN_SUCCESS",M="LOGIN_FAIL",z="LOGOUT",K="CLEAR_ERRORS",Q="CONTACT_ERROR",W="GET_CONTACTS",X="CLEAR_CONTACTS",Y=function(e,t){switch(t.type){case W:return Object(h.a)(Object(h.a)({},e),{},{contacts:t.payload,loading:!1});case Q:return Object(h.a)(Object(h.a)({},e),{},{error:t.payload,loading:!1});case _:return Object(h.a)(Object(h.a)({},e),{},{contacts:[t.payload].concat(Object(T.a)(e.contacts)),loading:!1});case P:return Object(h.a)(Object(h.a)({},e),{},{loading:!1,contacts:e.contacts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case S:return Object(h.a)(Object(h.a)({},e),{},{loading:!1,contacts:e.contacts.filter((function(e){return e._id!==t.payload}))});case L:case F:return Object(h.a)(Object(h.a)({},e),{},{current:t.payload});case I:return Object(h.a)(Object(h.a)({},e),{},{filtered:e.contacts.filter((function(e){var a=new RegExp("".concat(t.payload),"gi");return e.name.match(a)||e.email.match(a)})),loading:!1});case U:return Object(h.a)(Object(h.a)({},e),{},{filtered:null});case X:return Object(h.a)(Object(h.a)({},e),{},{contacts:null,current:null,filtered:null,error:null});default:return e}},Z=a(11),$=a.n(Z),ee=function(e){var t=Object(n.useReducer)(Y,{contacts:null,current:null,filtered:null,error:null}),a=Object(x.a)(t,2),c=a[0],r=a[1],s=function(){var e=Object(R.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.a.get("api/contacts/");case 3:t=e.sent,r({type:W,payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r({type:Q,payload:e.t0.response.msg});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(R.a)(A.a.mark((function e(t){var a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,$.a.post("/api/contacts/",t,a);case 4:n=e.sent,r({type:_,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r({type:Q,payload:e.t0.response.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(R.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.a.delete("/api/contacts/".concat(t));case 3:r({type:S,payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r({type:Q,payload:e.t0.response.msg});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(R.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,$.a.put("/api/contacts/".concat(t._id),t,a);case 4:r({type:P,payload:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r({type:Q,payload:e.t0.response.msg});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),d={contacts:c.contacts,current:c.current,filtered:c.filtered,addContact:o,deleteContact:l,setCurrent:function(e){r({type:L,payload:e})},clearCurrent:function(){r({type:F,payload:null})},updateContact:i,filterContacts:function(e){r({type:I,payload:e})},clearFilter:function(){r({type:U})},getContacts:s,clearContacts:function(){r({type:X})}};return Object(j.jsx)(u.Provider,{value:d,children:e.children})},te=function(e,t){switch(t.type){case H:case B:return localStorage.setItem("token",t.payload.token),Object(h.a)(Object(h.a)(Object(h.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});case J:case M:case q:case z:return localStorage.removeItem("token"),Object(h.a)(Object(h.a)({},e),{},{user:null,isAuthenticated:!1,token:null,loading:!1,error:t.payload});case K:return Object(h.a)(Object(h.a)({},e),{},{error:null});case V:return Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!0,user:t.payload});default:return e}},ae=function(e){e?$.a.defaults.headers.common["x-auth-token"]=e:delete $.a.defaults.headers.common["x-auth-token"]},ne=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,error:null,user:null},a=Object(n.useReducer)(te,t),c=Object(x.a)(a,2),r=c[0],s=c[1],o=function(){var e=Object(R.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&ae(localStorage.token),e.prev=1,e.next=4,$.a.get("api/auth/");case 4:t=e.sent,s({type:V,payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:q,payload:e.t0.response.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(R.a)(A.a.mark((function e(t){var a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,$.a.post("/api/users",t,a);case 4:n=e.sent,s({type:H,payload:n.data}),o(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:J,payload:e.t0.response.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(R.a)(A.a.mark((function e(t){var a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,$.a.post("/api/auth",t,a);case 4:n=e.sent,s({type:B,payload:n.data}),o(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:M,payload:e.t0.response.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),d={token:r.token,isAuthenticated:r.isAuthenticated,loading:r.loading,error:r.error,user:r.user,register:l,login:u,loadUser:o,logout:function(){return s({type:z})},clearErrors:function(){return s({type:K})}};return Object(j.jsx)(i.Provider,{value:d,children:e.children})},ce=Object(n.createContext)(),re=function(e){var t=Object(n.useContext)(ce),a=Object(n.useContext)(i),c=a.register,r=a.error,s=a.clearErrors,o=a.isAuthenticated,l=t.setAlert;Object(n.useEffect)((function(){o&&e.history.push("/"),r&&("User already exists"===r.msg&&l(r.msg,"danger"),s())}),[r,o,e.history]);var u=Object(n.useState)({name:"",email:"",password:"",confirm_password:""}),d=Object(x.a)(u,2),p=d[0],b=d[1],m=p.confirm_password,f=p.email,g=p.name,y=p.password,v=function(e){return b(Object(h.a)(Object(h.a)({},p),{},Object(O.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("div",{className:"form-container lg:w-1/2 md:w-1/2 sm:w-full mx-auto",children:[Object(j.jsxs)("h1",{className:"font-bold text-lg my-6",children:["Account ",Object(j.jsx)("span",{className:"text-primary ",children:"Register"})]}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===g||""===f||""===y?l("Please enter all fields","danger"):y!==m?l("Passwods do not match","danger"):c({user:p,email:f,name:g,password:y})},children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Name"}),Object(j.jsx)("input",{type:"text",name:"name",value:g,onChange:v})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"email",children:"Email"}),Object(j.jsx)("input",{type:"email",name:"email",value:f,onChange:v})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"password",children:"Password"}),Object(j.jsx)("input",{type:"password",name:"password",value:y,onChange:v,minLength:"6"})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Confirm Password"}),Object(j.jsx)("input",{type:"password",name:"confirm_password",value:m,onChange:v,minLength:"6"})]}),Object(j.jsx)("input",{type:"submit",value:"Register",className:"btn btn-primary btn-block rounded-none"})]})]})},se=function(e){var t=Object(n.useContext)(i),a=Object(n.useContext)(ce),c=a.setAlert,r=t.login,s=t.error,o=t.clearErrors,l=t.isAuthenticated;Object(n.useEffect)((function(){l&&e.history.push("/"),s&&("Invalid Credentials"===s.msg&&c(s.msg,"danger"),o())}),[s,l,e.history]);var u=Object(n.useState)({email:"",password:""}),d=Object(x.a)(u,2),p=d[0],b=d[1],m=p.email,f=p.password,g=function(e){return b(Object(h.a)(Object(h.a)({},p),{},Object(O.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("div",{className:"form-container lg:w-1/2 md:w-1/2 sm:w-full mx-auto",children:[Object(j.jsxs)("h1",{className:"font-bold text-lg my-6",children:["Account ",Object(j.jsx)("span",{className:"text-primary",children:"Login"})]}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r({email:m,password:f}),s&&"Invalid Credentials"===s.msg&&a.setAlert(s.msg,"danger")},children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"email",children:"Email"}),Object(j.jsx)("input",{type:"text",name:"email",value:m,onChange:g})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"password",children:"Password"}),Object(j.jsx)("input",{type:"password",name:"password",value:f,onChange:g})]}),Object(j.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary btn-block"})]})]})},oe=function(e,t){switch(t.type){case D:return[].concat(Object(T.a)(e),[t.payload]);case G:return e.filter((function(e){return e.id!==t.payload}));default:return e}},le=a(75),ie=function(e){var t=Object(n.useReducer)(oe,[]),a=Object(x.a)(t,2),c=a[0],r=a[1],s={alerts:c,setAlert:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=Object(le.a)();r({type:D,payload:{msg:e,type:t,id:n}}),setTimeout((function(){return r({type:G,payload:n})}),a)}};return Object(j.jsx)(ce.Provider,{value:s,children:e.children})},ue=function(){var e=Object(n.useContext)(ce);return e.alerts.length>0&&e.alerts.map((function(e){return Object(j.jsxs)("div",{className:"alert alert-".concat(e.type),children:[Object(j.jsx)("i",{className:"fas fa-info-circle"})," ",e.msg]},e.id)}))},je=a(35),de=function(e){var t=e.component,a=Object(je.a)(e,["component"]),c=Object(n.useContext)(i),r=c.isAuthenticated,s=c.loading;return Object(j.jsx)(b.b,Object(h.a)(Object(h.a)({},a),{},{render:function(e){return r||s?Object(j.jsx)(t,Object(h.a)({},e)):Object(j.jsx)(b.a,{to:"/login"})}}))};localStorage.token&&ae(localStorage.token);var pe=function(){return Object(j.jsx)(ne,{children:Object(j.jsx)(ee,{children:Object(j.jsx)(ie,{children:Object(j.jsx)(l.a,{children:Object(j.jsxs)(n.Fragment,{children:[Object(j.jsx)(p,{}),Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(ue,{}),Object(j.jsxs)(b.d,{children:[Object(j.jsx)(de,{exact:!0,path:"/",component:w}),Object(j.jsx)(b.b,{exact:!0,path:"/about",component:k}),Object(j.jsx)(b.b,{exact:!0,path:"/register",component:re}),Object(j.jsx)(b.b,{exact:!0,path:"/login",component:se})]})]})]})})})})})};r.a.render(Object(j.jsx)(pe,{}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.21a2f1ce.chunk.js.map